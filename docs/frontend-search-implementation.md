# 前端搜尋功能實作說明

## 概述

已成功整合 Fuse.js 後端搜尋 API 到前端，提供完整的搜尋體驗，包括：

- 模糊搜尋功能
- 搜尋建議與推薦關鍵字
- 搜尋結果頁面跳轉
- 標籤篩選結合搜尋

## 實作的功能

### 1. SearchBox 元件 (`src/components/SearchBox.vue`)

#### 主要功能：

- **搜尋輸入框**：支援 Enter 鍵和按鈕搜尋
- **推薦關鍵字**：顯示熱門搜尋關鍵字（基於熱門標籤）
- **搜尋建議**：即時過濾搜尋建議
- **自動跳轉**：搜尋時自動跳轉到 `/memes/all` 頁面

#### 使用方式：

```vue
<SearchBox @search="handleSearch" />
```

#### 支援的 Props：

- `placeholder`: 搜尋框提示文字（預設：'搜尋迷因'）
- `autoFocus`: 是否自動聚焦（預設：false）

#### 暴露的方法：

- `setQuery(query)`: 設定搜尋查詢
- `clear()`: 清空搜尋框
- `focus()`: 聚焦搜尋框

### 2. memeService 搜尋方法

新增的搜尋相關方法：

```javascript
// 基本搜尋
memeService.search(searchTerm, params)

// 根據標籤搜尋
memeService.searchByTags(searchTerm, tagNames, params)

// 取得搜尋建議
memeService.getSearchSuggestions()
```

### 3. 頁面整合

#### default.vue (導覽列)

- 使用 SearchBox 元件
- 搜尋時自動跳轉到 all.vue 頁面

#### all.vue (搜尋結果頁面)

- 接收 URL 查詢參數 `?search=關鍵字`
- 支援搜尋 + 標籤篩選的組合
- 顯示搜尋結果或空狀態訊息

## 使用流程

### 1. 基本搜尋流程

1. 使用者在導覽列或 all.vue 頁面的搜尋框輸入關鍵字
2. 按 Enter 或點擊搜尋按鈕
3. 自動跳轉到 `/memes/all?search=關鍵字`
4. all.vue 頁面接收參數並載入搜尋結果

### 2. 推薦關鍵字

1. 點擊搜尋框時顯示推薦關鍵字
2. 推薦關鍵字來源：
   - 熱門標籤（前 6 個）
   - 預設關鍵字
3. 點擊推薦關鍵字直接搜尋

### 3. 搜尋建議

1. 輸入關鍵字時顯示相關搜尋建議
2. 建議列表最多顯示 5 個
3. 點擊建議項目直接搜尋

### 4. 組合搜尋

- 可以同時使用搜尋關鍵字和標籤篩選
- 優先使用 `searchByTags()` API

## 技術細節

### API 整合

- 使用 `useFuzzySearch=false` 使用傳統搜尋，保持時間排序
- 搜尋結果按時間排序（最新到最舊）
- 支援分頁載入
- 錯誤處理和載入狀態

### 路由管理

- 搜尋參數存儲在 URL 查詢參數中
- 支援書籤和分享搜尋結果
- 瀏覽器後退/前進功能正常

### 效能考量

- 推薦關鍵字基於熱門標籤動態生成
- 搜尋建議即時過濾，避免過多 API 請求
- 適當的防抖處理

## 測試建議

### 基本功能測試

1. 在導覽列搜尋框輸入關鍵字，確認跳轉正常
2. 在 all.vue 頁面搜尋，確認結果更新
3. 測試推薦關鍵字和搜尋建議功能
4. 測試搜尋 + 標籤篩選組合

### 邊界情況測試

1. 空搜尋查詢的處理
2. 特殊字元搜尋
3. 網路錯誤時的降級處理
4. 搜尋無結果時的顯示

### 使用者體驗測試

1. 鍵盤導航（Tab, Enter）
2. 搜尋框聚焦/失焦行為
3. 載入狀態顯示
4. 錯誤訊息友好度

## 未來改進

1. **搜尋歷史**：記錄使用者搜尋歷史
2. **搜尋自動完成**：更智能的搜尋建議
3. **搜尋分析**：追蹤熱門搜尋關鍵字
4. **進階篩選**：日期範圍、作者等更多篩選選項
